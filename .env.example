# ===========================================
# Docker Compose Environment Variables
# ===========================================
# Copy this file to .env and fill in the values
# Generate JWT secrets with: openssl rand -hex 64
# ===========================================

# Database URL with Connection Pooling Configuration
# Format: postgresql://user:password@host:port/database?connection_limit=20&pool_timeout=10
# connection_limit: Number of connections per instance (default: 5, recommended: 20 for production)
# pool_timeout: Seconds to wait for connection from pool (default: 10s)
# Formula: (num_instances * connection_limit) should not exceed database max_connections
DATABASE_URL=postgresql://postgres:password@localhost:5432/noteflow?connection_limit=20&pool_timeout=10

# JWT Secrets (REQUIRED - NO DEFAULT VALUES FOR SECURITY)
# Generate strong secrets: openssl rand -hex 64
JWT_SECRET=
JWT_REFRESH_SECRET=

# Stripe (Optional - Leave empty if not using payments)
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# Sentry (Optional - Leave empty if not using error monitoring)
SENTRY_DSN=

# Email (Optional - Leave empty for development)
RESEND_API_KEY=
EMAIL_FROM=

# AWS S3 Backups (Optional - Leave empty for local backups)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=
AWS_S3_BACKUP_BUCKET=

# Security Configuration
# METRICS_ALLOWED_IPS: Comma-separated list of IPs allowed to access /metrics endpoint
# CRITICAL: In production, ALWAYS set this to Prometheus server IPs
# Example: METRICS_ALLOWED_IPS=10.0.0.5,192.168.1.100
# Empty value in development allows all IPs, but DENIED in production
METRICS_ALLOWED_IPS=

# Test Routes (Development only)
# ENABLE_TEST_ROUTES: Enable /api/test-setup routes for E2E testing
# NEVER set to true in production
ENABLE_TEST_ROUTES=false
